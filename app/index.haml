!!!
%html
  %head
    %meta{content: 'text/html; charset=UTF-8', 'http-equiv' => 'Content-Type'}/
    %title DailySchedule

  %body

    .container

      #tasks

        .row
          .col-10
            %h1 Liste des tÃ¢ches
          .col-1
            %input#start_hour.form-control{ name: :start_hour, type: :number, 'v-model' => :start_hour }
            -#= number_field_tag :start_hour, '', class: 'form-control', 'v-model' => :start_hour
          .col-1
            %input#start_minute.form-control{ name: :start_minute, type: :number, 'v-model' => :start_minute }
            -#= number_field_tag :start_minute, '', class: 'form-control', 'v-model' => :start_minute

        #add_tasks_bar
          .row
            .col-10
              %input#new_task.form-control{ name: :new_task, type: :text, 'v-model' => :new_task }
              -#= text_field_tag :new_task, '', class: 'form-control', 'v-model' => :new_task
            .col-1
              %input#duration.form-control{ name: :duration, type: :number, 'v-model' => :duration }
              -#= number_field_tag :duration, '', class: 'form-control', 'v-model' => :duration
            .col-1
              %button#add_task.btn.btn-primary{ 'v-on:click' => :add_task, name: :button, type: :button }
                Add
              -#= button_tag :add_task, class: 'btn btn-primary', 'v-on:click' => 'add_task', id: 'add_task'

        #tasks_list
          -#%scheduled-task{ 'v-for' => '(task, index) in tasks', 'key' => 'index', 'v-bind:task_data' => 'task' }
          -#%scheduled-task{ 'v-for' => 'task in tasks', 'key' => 'componentKey', 'v-bind:task_data' => 'task' }
          -#<scheduled-task v-for='(task, index) in tasks' :key='componentKey + index' v-bind:task_data='task'>

          // OK this is the final formula that is working. index is for each component, componentKey is a base
          // that increase each time you reorder ensuring the refresh.
          %scheduled-task{ 'v-for' => '(task, index) in tasks', ':key' => 'componentKey + index', 'v-bind:task_data' => 'task' }

%link{ href: 'assets/stylesheets/tasks.css', rel: 'stylesheet' }
%link{ crossorigin: 'anonymous', href: 'https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css',
  integrity: 'sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk', rel: 'stylesheet' }
  
/ JS, Popper.js, and jQuery
%script{crossorigin: 'anonymous', integrity: 'sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=', src: 'https://code.jquery.com/jquery-3.5.1.min.js'}
%script{ crossorigin: 'anonymous', integrity: 'sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo', src: 'https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js'}
%script{ crossorigin: 'anonymous', integrity: 'sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI', src: 'https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js'}

%script{crossorigin: 'anonymous', integrity: 'sha256-eGE6blurk5sHj+rmkfsGYeKyZx3M4bG+ZlFyA7Kns7E=', src: 'https://code.jquery.com/ui/1.12.0/jquery-ui.min.js'}

%script{ src: 'https://cdn.jsdelivr.net/npm/vue/dist/vue.js' }

%script{ src: 'assets/javascripts/luxon.js' }
%script{ src: 'assets/javascripts/local_storage.js' }
%script{ src: 'assets/javascripts/tasks_manager.js' }
%script{ src: 'assets/javascripts/tasks.js' }